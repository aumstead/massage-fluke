import GroupSvg from "../icons/GroupSvg";
import ChevronDownSvg from "../icons/ChevronDownSvg";
import Link from "next/link";
import { useState, useRef, useEffect } from "react";

import styles from "./BlogNav.module.css";

const BlogNav = () => {
  const [hovering, setHovering] = useState({
    account: false,
    login: false,
    create: false
  });

  const handleEnter = button => {
    setHovering({
      ...hovering,
      [button]: true
    });
  };
  const handleLeave = button => {
    setHovering({
      ...hovering,
      [button]: false
    });
  };

  const readRef = useRef(null)
  
  useEffect(() => {
    const homePageOptions = {
      rootMargin: "-70% 0px 0px 0px"
    };
    const homePageObserver = new IntersectionObserver(function(
      entries,
      homePageObserver
    ) {
      entries.forEach(entry => {
        if (!entry.isIntersecting) {
          readRef.current.classList.add(styles.fadeOut)
        } else {
          readRef.current.classList.remove(styles.fadeOut)
        }
      });
    },
    homePageOptions);
  
    homePageObserver.observe(readRef.current);
    return () => {
      homePageObserver.unobserve(readRef.current);
  };
  }, [])

  return (
    <section className={styles.container}>
      <div className={styles.heading__container}>
        <h2 className={styles.heading__h2}>
          Share Your Stories and Experiences!
        </h2>
        <GroupSvg width="50" height="50" fill="var(--color-primary)" />
      </div>
      <div className={styles.icons__container}>
        <div className={styles.icons__flexItem}>
          <p className={styles.icons__step}>Step 1</p>

          <Link href="/signup">
            <a
              onMouseEnter={() => handleEnter("account")}
              onMouseLeave={() => handleLeave("account")}
              className={`${styles.icons__btn}`}
            >
              <svg
                height="25"
                viewBox="-28 -19 618 618.66574"
                width="25"
                fill={
                  hovering.account
                    ? "var(--color-background)"
                    : "var(--color-secondary)"
                }
                xmlns="http://www.w3.org/2000/svg"
                className={styles.icons__svg}
              >
                <path d="m211.265625 264.132812c72.9375 0 132.066406-59.125 132.066406-132.066406 0-72.9375-59.128906-132.066406-132.066406-132.066406s-132.066406 59.128906-132.066406 132.066406c.070312 72.914063 59.15625 131.996094 132.066406 132.066406zm0-239.144531c59.140625 0 107.078125 47.945313 107.078125 107.078125 0 59.140625-47.9375 107.078125-107.078125 107.078125-59.136719 0-107.074219-47.9375-107.074219-107.078125.066406-59.109375 47.964844-107.007812 107.074219-107.078125zm0 0" />
                <path d="m554.492188 337.976562-107.703126-57.347656c-3.710937-2.023437-8.203124-1.976562-11.871093.121094l-98.582031 53.976562c-36.109376-26.863281-79.34375-40.855468-125.316407-40.855468-57.226562.125-110.328125 22.367187-149.6875 62.847656-39.859375 40.855469-61.726562 96.707031-61.597656 157.304688.019531 6.894531 5.601563 12.476562 12.492187 12.496093l347.597657-.625c16.339843 20.289063 37.347656 36.320313 61.222656 46.730469l14.496094 6.371094c1.574219.703125 3.28125 1.042968 5 1 1.710937-.03125 3.40625-.367188 4.996093-1l16.367188-7.121094c60.136719-25.230469 99.25-84.09375 99.207031-149.3125v-73.46875c.003907-4.640625-2.539062-8.910156-6.621093-11.117188zm-529.394532 163.429688c2.621094-49.105469 21.738282-93.957031 54.226563-127.320312 34.605469-35.609376 81.460937-55.226563 131.816406-55.226563h.375c41.359375 0 80.09375 12.996094 112.203125 37.609375v67.59375c.019531 26.835938 6.714844 53.242188 19.488281 76.839844zm511.027344-78.84375c.023438 55.21875-33.140625 105.039062-84.089844 126.324219h-.125l-11.367187 4.871093-9.5-4.125c-49.96875-21.832031-82.28125-71.160156-82.335938-125.691406v-67.597656l92.332031-50.601562 95.085938 50.726562zm0 0" />
                <path d="m406.804688 415.941406c-4.484376-5.242187-12.371094-5.855468-17.617188-1.371094-5.242188 4.484376-5.855469 12.371094-1.371094 17.613282l28.359375 33.109375c2.382813 2.769531 5.847657 4.363281 9.496094 4.375 2.863281.023437 5.644531-.945313 7.871094-2.75l65.972656-53.597657c5.347656-4.382812 6.128906-12.269531 1.746094-17.621093-4.378907-5.347657-12.265625-6.128907-17.613281-1.746094l-56.476563 45.980469zm0 0" />
              </svg>
              Make an account here
            </a>
          </Link>
        </div>
        <div className={styles.icons__flexItem}>
          <p className={styles.icons__step}>Step 2</p>
          <Link href="/signin">
            <a
              onMouseEnter={() => handleEnter("login")}
              onMouseLeave={() => handleLeave("login")}
              className={styles.icons__btn}
            >
              <svg
                version="1.1"
                id="Layer_1"
                xmlns="http://www.w3.org/2000/svg"
                x="0px"
                y="0px"
                viewBox="0 0 512 512"
                width="25"
                height="25"
                fill={
                  hovering.login
                    ? "var(--color-background)"
                    : "var(--color-secondary)"
                }
                className={styles.icons__svg}
              >
                <path
                  d="M173.781,280.469c-4.16,4.16-4.16,10.923,0,15.083c2.091,2.069,4.821,3.115,7.552,3.115c2.731,0,5.461-1.045,7.531-3.115
				l64-64c0.981-0.981,1.771-2.176,2.304-3.477c0.299-0.747,0.341-1.515,0.469-2.304c0.107-0.597,0.363-1.152,0.363-1.771
				c0-0.811-0.299-1.536-0.469-2.283c-0.128-0.576-0.128-1.195-0.363-1.749c-0.555-1.344-1.365-2.539-2.368-3.563l-63.936-63.936
				c-4.16-4.16-10.923-4.16-15.083,0c-4.16,4.16-4.16,10.923,0,15.083l45.76,45.781H32c-5.888,0-10.667,4.779-10.667,10.667
				S26.112,234.667,32,234.667h187.584L173.781,280.469z"
                />
                <path
                  d="M444.608,0c-1.643,0-3.243,0.32-4.843,0.491C438.955,0.299,438.187,0,437.333,0h-256C151.936,0,128,23.936,128,53.333
				V160c0,5.888,4.779,10.667,10.667,10.667s10.667-4.779,10.667-10.667V53.333c0-17.643,14.357-32,32-32h204.032l-80.107,34.325
				c-16.96,7.275-27.925,23.893-27.925,42.347v328.661h-96c-15.339,0-28.373-10.667-31.552-15.083l-0.448-123.627
				c-0.021-5.867-4.8-10.624-10.667-10.624c0,0-0.021,0-0.043,0c-5.888,0.021-10.645,4.821-10.624,10.709l0.491,124.309
				c-0.427,4.672,1.771,9.557,6.677,14.933c8.725,9.557,26.048,20.715,46.165,20.715h96v17.941
				c0,25.387,20.672,46.059,46.059,46.059c6.293,0,12.416-1.259,18.133-3.712l121.216-51.947
				c16.96-7.275,27.925-23.893,27.925-42.347V46.059C490.667,20.672,469.995,0,444.608,0z M469.333,413.995
				c0,9.899-5.888,18.837-14.997,22.72L333.12,488.661c-3.072,1.344-6.357,2.005-9.728,2.005c-13.632,0-24.725-11.093-24.725-24.725
				V98.005c0-9.899,5.888-18.837,14.997-22.72L434.88,23.339c3.072-1.344,6.357-2.005,9.728-2.005
				c13.632,0,24.725,11.093,24.725,24.725V413.995z"
                />
                <path
                  d="M330.667,234.667c-5.888,0-10.667,4.779-10.667,10.667V288c0,5.888,4.779,10.667,10.667,10.667
				s10.667-4.779,10.667-10.667v-42.667C341.333,239.445,336.555,234.667,330.667,234.667z"
                />
              </svg>
              Sign in here
            </a>
          </Link>
        </div>

        <div className={styles.icons__flexItem}>
          <p className={styles.icons__step}>Step 3</p>
          <Link href="/blog/create">
            <a
              onMouseEnter={() => handleEnter("create")}
              onMouseLeave={() => handleLeave("create")}
              className={styles.icons__btn}
            >
              <svg
                viewBox="0 0 60 60"
                xmlns="http://www.w3.org/2000/svg"
                width="25"
                height="25"
                className={styles.icons__svg}
              >
                <g id="Page-1" fill-rule="evenodd">
                  <g
                    id="018---Poem"
                    fill={
                      hovering.create
                        ? "var(--color-background)"
                        : "var(--color-secondary)"
                    }
                    fill-rule="nonzero"
                  >
                    <path
                      id="Shape"
                      d="m59.533 4.684c-.3090562-.19475349-.6997154-.20548799-1.019-.028-2.6264337 1.37898603-5.5740998 2.02984119-8.537 1.885-.2416121-3.67682277-3.2922497-6.53682284-6.977-6.541h-36c-3.86416566.00440864-6.99559136 3.13583434-7 7v46c.00440864 3.8641657 3.13583434 6.9955914 7 7h36c3.6505268-.0281152 6.6665122-2.8569603 6.9280964-6.4982115.2615841-3.6412511-2.3190747-6.872154-5.9280964-7.4217885v-22.78c2.086-1.791 4.746-2.638 7.512-3.519l.714-.228c6.959-2.234 7.742-13.483 7.774-13.961.0222252-.3653213-.1569001-.71359917-.467-.908zm-16.533-2.684c2.5511213.00800817 4.6852005 1.93933476 4.947 4.477-.745-.039-1.5-.09-2.254-.143-2.8022926-.29594944-5.629174-.2717938-8.426.072-.025 0-.047.006-.071.011-3.5295715.5529539-6.7786881 2.2532488-9.245 4.838-.247.249-.482.5-.711.745h-15.34c1.3460529-1.3153928 2.104889-3.11794883 2.104889-5s-.7588361-3.68460721-2.104889-5zm-41 51v-46c0-2.76142375 2.23857625-5 5-5s5 2.23857625 5 5-2.23857625 5-5 5c-.55228475 0-1 .4477153-1 1s.44771525 1 1 1h18.592c-5.158 7.01-3.378 13.369-2.306 15.88-1.8309362 3.1540195-3.1769969 6.5655232-3.993 10.12h-10.293c-.55228475 0-1 .4477153-1 1s.44771525 1 1 1h11.117c.2125025.0000953.4195105-.0675063.591-.193l4.564-3.341c.2555786-.1867475.4076502-.4834727.41-.8.0574764-1.5763657.2245464-3.1468234.5-4.7 1.2879527.6077168 2.6969552.9154339 4.121.9.7546733-.0009868 1.5073777-.0770277 2.247-.227 2.9449398-.6245227 5.5659119-2.2900578 7.382-4.691.019-.019.029-.044.047-.064.5995981-.771042 1.1271453-1.5955018 1.576-2.463.142-.277.293-.539.45-.791v20.37h-35.005c-.55228475 0-1 .4477153-1 1s.44771525 1 1 1c2.76142375 0 5 2.2385763 5 5s-2.23857625 5-5 5-5-2.2385763-5-5zm22.265-20.741c-.2968847 1.6125927-.4856389 3.2432279-.565 4.881l-1.972 1.443c.6424979-2.1839293 1.4920182-4.3015352 2.537-6.324zm23.735 20.741c-.0033061 2.7600532-2.2399468 4.9966939-5 5h-31.1c1.3460529-1.3153928 2.104889-3.1179488 2.104889-5s-.7588361-3.6846072-2.104889-5h31.1c2.7600532.0033061 4.9966939 2.2399468 5 5zm3.613-35.352-.708.227c-2.0395344.5794344-4.0160299 1.3613226-5.9 2.334-.8492275-.032454-1.6613969-.3562625-2.3-.917-.252944-.2525868-.6214274-.3510425-.966646-.25828-.3452186.0927626-.6147254.3626507-.707.708-.0922745.3453494.006702.7136932.259646.96628.4370954.4267654.9516368.7661726 1.516 1-1.2603966 1.0494148-2.2940388 2.3443596-3.038 3.806-.3108633.6030219-.6647799 1.182857-1.059 1.735-1.8171961.0070338-3.6140237-.3827055-5.265-1.142-.4942948-.2468713-1.0951287-.0462948-1.342.448-.2468712.4942949-.0462948 1.0951287.448 1.342 1.4127017.6764228 2.9336937 1.0982247 4.493 1.246-1.3725053 1.276528-3.0662431 2.155889-4.9 2.544-1.8809403.4356169-3.8563663.1651568-5.551-.76.3523506-1.5420129.8457616-3.0483557 1.474-4.5 7.717-9.527 13.321-11.738 22.933-13.071.354405-.0485224.6559004-.2826541.7906681-.6140073.1347676-.3313533.0822798-.7094567-.1376488-.9915714-.2199285-.2821148-.5737984-.4252695-.9280193-.3754213-9.973 1.384-16.151 3.813-24.274 13.877-.01.011-.018.022-.027.034-.653.81-1.24 1.623-1.785 2.432-1.1561597-4.0990187-.3621479-8.5020405 2.153-11.939.0447228.494255.1256061.9845681.242 1.467.135862.5357162.6802838.859862 1.216.724s.859862-.6802838.724-1.216c-.272532-1.1537036-.3210769-2.3489957-.143-3.521.176-.189.354-.378.542-.568 1.7030371-1.7743231 3.828827-3.08702764 6.178-3.815-.3650695 1.01006981-.5515194 2.0759811-.551 3.15 0 .5522847.4477153 1 1 1s1-.4477153 1-1c-.0141085-1.2981981.3365287-2.57428185 1.012-3.683 1.6669297-.19928175 3.3485593-.24614244 5.024-.14-.3664017.42029075-.6806792.88331282-.936 1.379-.2452001.4948481-.0428363 1.0947761.452 1.34.139086.0693896.292569.1050195.448.104.3814967.0015143.7306171-.2141646.9-.556.4436872-.83890898 1.0822372-1.55907806 1.862-2.1 3.957.272 8.026.521 12.029-1.122-.484 3.035-1.96 9.078-6.178 10.426z"
                    />
                    <path
                      id="Shape"
                      d="m9 37h8c.5522847 0 1-.4477153 1-1s-.4477153-1-1-1h-8c-.55228475 0-1 .4477153-1 1s.44771525 1 1 1z"
                    />
                    <path
                      id="Shape"
                      d="m9 32h10c.5522847 0 1-.4477153 1-1s-.4477153-1-1-1h-10c-.55228475 0-1 .4477153-1 1s.44771525 1 1 1z"
                    />
                    <path
                      id="Shape"
                      d="m9 27h10c.5522847 0 1-.4477153 1-1s-.4477153-1-1-1h-10c-.55228475 0-1 .4477153-1 1s.44771525 1 1 1z"
                    />
                    <path
                      id="Shape"
                      d="m9 22h10c.5522847 0 1-.4477153 1-1s-.4477153-1-1-1h-10c-.55228475 0-1 .4477153-1 1s.44771525 1 1 1z"
                    />
                  </g>
                </g>
              </svg>
              Write a blog post here
            </a>
          </Link>
        </div>
      </div>

      <div className={styles.scroll__container} ref={readRef}>
        <p className={styles.scroll__title}>Read the blogs!</p>
        <ChevronDownSvg width="28" height="25" />
      </div>
    </section>
  );
};

export default BlogNav;
